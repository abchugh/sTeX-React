import { QuizProblem, Solutions } from "../../ftml-utils";
import { ProblemResponse } from "../../ftml-utils/flams";

const problem: QuizProblem = {
  html: '<div class="rustex-contents" data-ftml-problem="pseudocode1" data-ftml-autogradable="true">\n\t<div class="rustex-paragraph rustex-withwidth"><span class="rustex-contents" data-ftml-title="">Pseudocode</span> <div class="rustex-hbox-container"><div class="rustex-hbox"></div></div> <div class="rustex-hbox-container"><div class="rustex-hbox"></div></div> <div class="rustex-hbox-container"><div class="rustex-hbox"></div></div> <div class="rustex-hbox-container"><div class="rustex-hbox"></div></div>  Complete the following <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/computing&amp;p=mod&amp;m=pseudocode&amp;s=pseudocode" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">pseudocode</span></span> fragment at the position <div class="rustex-hbox-container" style="font-family:Computer Modern Typewriter;"><div class="rustex-hbox">???</div></div> so that it <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/eida&amp;p=mod&amp;m=compute&amp;s=compute" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">computes</span></span> the <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/arithmetics&amp;p=mod&amp;m=intarith&amp;s=square root" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">square root</span></span> <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/computing&amp;p=mod&amp;m=subroutine&amp;s=function" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">function</span></span> for <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/arithmetics&amp;p=mod&amp;m=naturalnumbers&amp;s=positive" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">positive</span></span> <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/computing&amp;p=mod&amp;m=subroutine&amp;s=parameter" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">inputs</span></span> (<span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/arithmetics&amp;p=mod&amp;m=arithmetics&amp;s=round" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">rounded</span></span> down if necessary). </div>\n\t<div class="rustex-vskip" style="height:9px;"></div>\n\t<a id="lstlisting.-1"></a><div class="rustex-contents" style="font-family:Computer Modern Typewriter;">\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.1" name="lstnumber.-1.1"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">fun</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">sqrt</div></div><div class="rustex-hbox-container"><div class="rustex-hbox">(</div></div><div class="rustex-hbox-container"><div class="rustex-hbox">n</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">:</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">int</div></div><div class="rustex-hbox-container"><div class="rustex-hbox">)</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">:</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">int</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">=</div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.2" name="lstnumber.-1.2"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hskip" style="margin-left:7.0857px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">rt</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">:=</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">0</div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.3" name="lstnumber.-1.3"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hskip" style="margin-left:7.0857px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">sq</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">:=</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">0</div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.4" name="lstnumber.-1.4"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hskip" style="margin-left:7.0857px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">while</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">sq</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">&lt;=</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">n</div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.5" name="lstnumber.-1.5"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hskip" style="margin-left:21.2571px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">sq</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">:=</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">sq</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">+</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">2*</div></div><div class="rustex-hbox-container"><div class="rustex-hbox">rt</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">+</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">???</div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.6" name="lstnumber.-1.6"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hskip" style="margin-left:21.2571px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">rt</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">:=</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">rt</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">+</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">1</div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth"><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-vrule-container" style="height:13.42966px;--rustex-this-width:517.5px;color:#f5f5f5;"><div style="background:#f5f5f5;margin-bottom:-4.02894px;"></div></div><div class="rustex-hskip" style="margin-left:4.5px;"></div><div class="rustex-hbox-container"><div class="rustex-hbox" style="justify-content:space-between;width:0;"><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;color:#f5f5f5;"></div></div></div><div class="rustex-hskip" style="margin-left:0px;margin-right:auto;"></div></div></div></div></div><div class="rustex-hbox-container" style="height:0px;"><div class="rustex-hbox"><div class="rustex-raise" style="--rustex-raise:13.42969px;"><div class="rustex-hbox-container"><div class="rustex-hbox"><a id="lstnumber.-1.7" name="lstnumber.-1.7"></a></div></div></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"></div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-hskip" style="margin-left:7.0857px;"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">return</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">rt</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">-</div></div><div class="rustex-hbox-container"><div class="rustex-hbox"><div class="rustex-space-in-hbox"></div></div></div><div class="rustex-hbox-container"><div class="rustex-hbox">1</div></div></div></div>\n\t<div class="rustex-paragraph rustex-withwidth">Fill in the missing <span class="rustex-contents" data-ftml-term="OMID" data-ftml-head="https://mathhub.info?a=smglom/computing&amp;p=mod&amp;m=computer-code&amp;s=code" data-ftml-notationid=""><span class="rustex-contents" data-ftml-comp="">code</span></span> here: <span class="rustex-contents" data-ftml-fillinsol="" data-ftml-fillinsol-width="25.56367"></span>. </div></div>',
  title_html: "Pseudocode",
  uri: "https://mathhub.info?a=courses/FAU/AI/problems&p=pretest/quiz&d=pseudocode1&l=en&e=problem",
  total_points: 5,
  preconditions: [],
  objectives: [
    [
      "Apply",
      "https://mathhub.info?a=smglom/computing&p=mod&m=pseudocode&s=pseudocode",
    ],
  ],
};
const solution = "0102016582CC41010001310100";

/*
function getProblemState(
  isFrozen: boolean,
  solution?: string,
  current_response?: ProblemResponse
): ProblemState {
  if (!isFrozen) return { type: "Interactive", current_response };
  if (!solution || !current_response)
    return { type: "Finished", current_response };
  const feedback =
    Solutions.from_jstring(solution)?.check_response(current_response);
  if (!feedback) return { type: "Finished", current_response }; // Something went wrong!!
  return { type: "Graded", feedback: feedback.to_json() };
}

export function ProblemViewer({
  problem,
  solution,
  onResponseUpdate,
  isFrozen,
  r,
}: {
  problem: QuizProblem;
  solution: string;
  onResponseUpdate?: (response: ProblemResponse) => void;
  isFrozen: boolean;
  r?: ProblemResponse;
}) {
  const problemState = getProblemState(isFrozen, solution, r);
  const { html, uri } = problem;

  return (
    <FTMLFragment
      key={uri}
      fragment={{ html, uri }}
      problemStates={new Map([[uri, problemState]])}
      onProblem={(response) => {
        onResponseUpdate?.(response);
      }}
    />
  );
}
*/
const BugPage = () => {
  const r: ProblemResponse = {
    uri: "https://mathhub.info?a=courses/FAU/AI/problems&p=pretest/quiz&d=pseudocode1&l=en&e=problem",
    responses: [""],
  };
  const feedback = Solutions.from_jstring(solution)?.check_response(r);
  // console.log(feedback); <-- Not null
  console.log(feedback?.to_json());
  return (
    <div>
      {/*
      <ProblemViewer
        problem={problem}
        solution={solution}
        isFrozen={true}
        r={r}
      />*/}
    </div>
  );
};

export default BugPage;
